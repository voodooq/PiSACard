webpackJsonp([20],{"9vyr":function(e,t,a){var s=a("Vo2D");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("425fdc6e",s,!0,{})},SVOP:function(e,t,a){"use strict";function s(e){a("9vyr")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("r4Fr"),r={data:function(){return{id:null,token:sessionStorage.getItem("token")?sessionStorage.getItem("token"):localStorage.getItem("token"),data:[],cardTime:0,time:0,packageInfo:{},haveCard:{},battleCard:[],myGuessTimes:0}},created:function(){this.searchGuessCard()},filters:{capitalize:function(e){var t=new Date(parseInt(e));return[t.getHours()<10?"0"+t.getHours():t.getHours(),t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds()].join(":")}},mounted:function(){this.$emit("l2dMassage","这里可以进行猜卡，不仅可以获得猜中的卡，更可以获得丰厚的星星奖励！就算一张都没有猜中也可以获得宝石奖励！")},methods:{checkIndexOf:function(e,t){return t.indexOf(e)},send:function(){var e=this,t=this.data.filter(function(e){return e.sel});if(t.length<6)return this.$message.error("请选择6张卡牌！"),!1;var a=258;0===this.myGuessTimes?a=0:1===this.myGuessTimes&&(a=78),this.$confirm("猜卡将消耗"+a+"颗星星, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then(function(){for(var a=[],s=0;s<t.length;s++)a.push(t[s].index);var r={token:e.token,type:"buy",time:e.cardTime,id:e.id,cardIndex:a};n.a.userguesscard(r).then(function(t){0==t.data.code?e.$message.error(t.data.msg):1==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.$emit("updateUserinfo")):201==t.data.code&&e.$message.error(t.data.msg),e.searchGuessCard()})}).catch(function(){})},help:function(){this.$alert("系统每个整点会自动生成30张卡牌并自动结算上个整点选中的6张卡牌。<br />每位大佬可以选择6张心仪的卡牌，点击【猜卡】按钮上传选中的卡牌。<br />当天第一次猜卡免费，第二次猜卡消耗78星星，第三次以后每次消耗258星星。<br />然后等下一个整点公布结果后在【兑换】选项卡中兑换奖品。<br />系统将会根据猜中卡牌的张数发放对应的星星，同时还会获得猜中的卡牌。<br />奖品如下：<br />猜中零张卡牌：随机宝石×2。<br />猜中一张卡牌：10颗星星+猜中的卡牌。<br />猜中两张卡牌：30颗星星+猜中的卡牌。<br />猜中三张卡牌：160颗星星+猜中的卡牌。<br />猜中四张卡牌：2000颗星星+猜中的卡牌。<br />猜中五张卡牌：50000颗星星+猜中的卡牌。<br />猜中六张卡牌：500万颗星星+猜中的卡牌。",{dangerouslyUseHTMLString:!0,lockScroll:!1})},selCard:function(e){if(!this.data[e].sel&&this.data.filter(function(e){return e.sel}).length>=6)return this.$message({message:"最多只能选择6张卡牌！",type:"warning"}),!1;this.data[e].sel=!this.data[e].sel,this.$forceUpdate()},searchGuessCard:function(){var e=this,t={token:this.token};this.time=(new Date).getTime(),n.a.searchguesscard(t).then(function(t){if(0==t.data.code)e.$message.error(t.data.msg);else if(1==t.data.code){e.haveCard=t.data.myCardCount,e.battleCard=t.data.battleCard,e.data=t.data.data.card,e.id=t.data.data._id,e.myGuessTimes=t.data.myGuessTimes,e.cardTime=Number(t.data.data.time);for(var a=0;a<e.data.length;a++)e.data[a].sel=!1,e.data[a].index=a;for(var s=t.data.packageInfo,n=0;n<s.length;n++)e.packageInfo[s[n].packageId]=s[n].name}})}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wm_guesscard_content_body"},[e._m(0),e._v(" "),a("h6",{staticClass:"tc f14 mb15 mt5"},[0===e.myGuessTimes?a("span",[e._v("本次猜卡"),a("span",{staticClass:"cRed"},[e._v("免费")]),e._v("！")]):1===e.myGuessTimes?a("span",[e._v("本次猜卡消耗"),a("span",{staticClass:"cRed"},[e._v("78")]),e._v("颗星星！")]):a("span",[e._v("本次猜卡消耗"),a("span",{staticClass:"cRed"},[e._v("258")]),e._v("颗星星！")]),a("span",[e._v("上次获取时间："+e._s(e._f("capitalize")(e.time))+"\n  "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击刷新",placement:"top"}},[a("i",{staticClass:"el-icon-refresh wm_set_pointer pl5 cRed",on:{click:function(t){return e.searchGuessCard()}}})])],1)]),e._v(" "),e.data.length>0?a("div",{staticClass:"wm_guesscard_card_body"},[a("el-row",{attrs:{gutter:5}},e._l(e.data,function(t,s){return a("el-col",{key:s,staticClass:"mb5",attrs:{span:4,xs:8}},[a("div",{staticClass:"wm_guesscard_col",on:{click:function(t){return e.selCard(s)}}},[a("img",{key:t.cardId,staticClass:"wm_guesscard_card_img",class:{wm_guesscard_nosel:!t.sel},attrs:{src:e.$wikimoecard.url+t.packageId+"/"+t.cardId+".jpg"}}),e._v(" "),a("div",{staticClass:"wm_guesscard_mark_box type_2 f12 cOrange ellipsis"},[a("span",{staticClass:"wm_guesscard_mark_item"},[e._v(e._s(e.packageInfo[t.packageId]))])]),e._v(" "),a("div",{staticClass:"wm_guesscard_mark_box f12 cRed ellipsis"},[-1!==e.checkIndexOf(t.cardId,e.battleCard)?a("span",{staticClass:"wm_guesscard_mark_item"},[e._v("战")]):e._e(),e._v(" "),a("span",{staticClass:"wm_guesscard_mark_item cGreen1A7"},[e._v("持:"+e._s(e.haveCard[t.cardId]))])])])])}),1),e._v(" "),a("div",{staticClass:"wm_guesscard_btn_body"},[a("el-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("猜卡")]),e._v(" "),a("el-button",{on:{click:e.help}},[e._v("说明")])],1)],1):e._e()])},d=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h6",{staticClass:"mt20 tc f16"},[a("span",[e._v("每个整点更新一次猜卡！")])])}],c={render:i,staticRenderFns:d},o=c,l=a("VU/8"),u=s,m=l(r,o,!1,u,"data-v-5e6057d1",null);t.default=m.exports},Vo2D:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"\n.wm_guesscard_card_img[data-v-5e6057d1]{\n  width: 100%;\n  height: auto;\n}\n.wm_guesscard_nosel[data-v-5e6057d1]{\n  opacity: 0.4;\n}\n.wm_guesscard_btn_body[data-v-5e6057d1]{\n    padding: 20px 0;\n    text-align: center;\n    background-color: #fff;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 999;\n}\n.wm_guesscard_col[data-v-5e6057d1]{\n  padding-bottom: 140%;\n  position: relative;\n  z-index: 1;\n  cursor: url(/static/cur/pointer.cur),pointer;\n}\n.wm_guesscard_col img[data-v-5e6057d1]{\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n.wm_guesscard_mark_box[data-v-5e6057d1]{\n  z-index: 2;\n  position: absolute;\n  bottom: 5px;\n  left: 5px;\n  right: 5px;\n}\n.wm_guesscard_mark_box.type_2[data-v-5e6057d1]{\n  bottom: 24px;\n}\n.wm_guesscard_mark_item[data-v-5e6057d1]{\n  background-color: rgba(255,255,255,0.8);\n  padding: 0px 3px;\n}\n",""])}});